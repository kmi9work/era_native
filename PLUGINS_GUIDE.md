# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–ª–∞–≥–∏–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ era_native

## –û–±–∑–æ—Ä

–ü–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —ç–∫—Ä–∞–Ω—ã —è–¥—Ä–∞ –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–¥–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
era_native/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ registry/                          # Component Registry
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ComponentRegistry.ts           # –†–µ–≥–∏—Å—Ç—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ë–ï–ó EXAMPLE)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts                       # –≠–∫—Å–ø–æ—Ä—Ç registry (–ë–ï–ó EXAMPLE)
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ game.ts                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã (–ë–ï–ó EXAMPLE)
‚îÇ   ‚îú‚îÄ‚îÄ plugins/                           # –ü–ª–∞–≥–∏–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts                       # –ó–∞–≥—Ä—É–∑—á–∏–∫ –ø–ª–∞–≥–∏–Ω–æ–≤ (–ë–ï–ó EXAMPLE)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ game-plugins/                  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏–≥—Ä–æ–≤—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ README.md                  # –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–° EXAMPLE)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ vassals-and-robbers/       # –ü—Ä–∏–º–µ—Ä –ø–ª–∞–≥–∏–Ω–∞ (–° EXAMPLE)
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ index.ts               # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ screens/               # –≠–∫—Ä–∞–Ω—ã
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ components/            # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ services/              # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ hooks/                 # Custom hooks
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ screens/                           # –≠–∫—Ä–∞–Ω—ã —è–¥—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ services/                          # –°–µ—Ä–≤–∏—Å—ã —è–¥—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ types.ts
‚îú‚îÄ‚îÄ App.tsx                                 # –û–±–Ω–æ–≤–ª—ë–Ω —Å registry
‚îú‚îÄ‚îÄ tsconfig.json                           # –û–±–Ω–æ–≤–ª—ë–Ω —Å paths
‚îî‚îÄ‚îÄ PLUGINS_GUIDE.md                        # –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Component Registry

**–§–∞–π–ª:** `src/registry/ComponentRegistry.ts` (–ë–ï–ó EXAMPLE)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ React Native, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —è–¥—Ä–∞
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏—Ö –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å, –±—ã–ª –ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
import { componentRegistry } from './src/registry';

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —è–¥—Ä–∞
componentRegistry.register('PlantWorkshopScreen', PlantWorkshopScreen, true);

// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –ø–ª–∞–≥–∏–Ω–µ
componentRegistry.register('PlantWorkshopScreen', CustomPlantWorkshopScreen);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
const Screen = componentRegistry.get('PlantWorkshopScreen');

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
const isOverridden = componentRegistry.isOverridden('PlantWorkshopScreen');
```

### 2. Game Config

**–§–∞–π–ª:** `src/config/game.ts` (–ë–ï–ó EXAMPLE)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–≥—Ä.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
import { gameConfig, useGameConfig } from './src/config/game';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
if (gameConfig.isActive('vassals-and-robbers')) {
  // –õ–æ–≥–∏–∫–∞ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã
}

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ (—á–µ—Ä–µ–∑ hook)
const { activeGame, isGameActive } = useGameConfig();

console.log(activeGame); // 'base-game' –∏–ª–∏ 'vassals-and-robbers'
console.log(isGameActive('vassals-and-robbers')); // true/false
```

### 3. Plugin Loader

**–§–∞–π–ª:** `src/plugins/index.ts` (–ë–ï–ó EXAMPLE)

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–ª–∞–≥–∏–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã.

## –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

```bash
cd era_native/src/plugins/game-plugins
mkdir -p my-game/{screens,components,services,hooks}
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ index.ts

```typescript
// EXAMPLE: –≠—Ç–æ —à–∞–±–ª–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
import { componentRegistry } from '../../../registry';
import { gameConfig } from '../../../config/game';

export const initMyGamePlugin = () => {
  if (!gameConfig.isActive('my-game')) {
    console.log('[My Game] Plugin not active, skipping...');
    return;
  }

  console.log('[My Game] Initializing plugin...');

  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
  // import CustomScreen from './screens/CustomScreen';
  // componentRegistry.register('SomeScreen', CustomScreen);

  console.log('[My Game] Plugin initialized');
};
```

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –≤ –∑–∞–≥—Ä—É–∑—á–∏–∫

–í `src/plugins/index.ts`:

```typescript
import { initMyGamePlugin } from './game-plugins/my-game';

export const initializePlugins = () => {
  // ...
  if (gameConfig.isActive('my-game')) {
    initMyGamePlugin();
  }
};
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–í `src/config/game.ts` –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –∏–≥—Ä—É:

```typescript
availableGames: {
  'base-game': { name: 'Era of Change', description: '–ë–∞–∑–æ–≤–∞—è –∏–≥—Ä–∞' },
  'my-game': { name: 'My Game', description: '–ú–æ—è –∏–≥—Ä–∞' },
},
```

### –®–∞–≥ 5: –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
ACTIVE_GAME=my-game
BACKEND_URL=http://localhost:3000
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤

```typescript
// –í index.ts –ø–ª–∞–≥–∏–Ω–∞
import { componentRegistry } from '../../../registry';
import CustomPlantWorkshopScreen from './screens/CustomPlantWorkshopScreen';

export const initVassalsPlugin = () => {
  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —ç–∫—Ä–∞–Ω PlantWorkshop
  componentRegistry.register('PlantWorkshopScreen', CustomPlantWorkshopScreen);
};
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ PlantWorkshop –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–∫—Ä–∞–Ω!

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

```typescript
// screens/VassalsScreen.tsx
import React, { useState } from 'react';
import { View, Text, FlatList, TouchableOpacity, StyleSheet } from 'react-native';
import { useVassals } from '../hooks/useVassals';

interface VassalsScreenProps {
  onClose: () => void;
}

export const VassalsScreen: React.FC<VassalsScreenProps> = ({ onClose }) => {
  const { vassals, loading, fetchVassals } = useVassals();

  useEffect(() => {
    fetchVassals();
  }, []);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Vassals</Text>
      
      {loading ? (
        <ActivityIndicator size="large" />
      ) : (
        <FlatList
          data={vassals}
          renderItem={({ item }) => (
            <View style={styles.item}>
              <Text>{item.name}</Text>
              <Text>Loyalty: {item.loyalty}</Text>
            </View>
          )}
          keyExtractor={item => item.id.toString()}
        />
      )}

      <TouchableOpacity style={styles.button} onPress={onClose}>
        <Text style={styles.buttonText}>–ù–∞–∑–∞–¥</Text>
      </TouchableOpacity>
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20 },
  item: { padding: 15, backgroundColor: 'white', marginBottom: 10, borderRadius: 8 },
  button: { backgroundColor: '#1976d2', padding: 15, borderRadius: 8, marginTop: 20 },
  buttonText: { color: 'white', fontSize: 16, textAlign: 'center' },
});
```

### –°–æ–∑–¥–∞–Ω–∏–µ Custom Hook

```typescript
// hooks/useVassals.ts
import { useState } from 'react';
import axios from 'axios';
import { CONFIG } from '../../../config';

interface Vassal {
  id: number;
  name: string;
  loyalty: number;
}

export const useVassals = () => {
  const [vassals, setVassals] = useState<Vassal[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const fetchVassals = async () => {
    setLoading(true);
    setError(null);
    try {
      const { data } = await axios.get(`${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals`);
      setVassals(data);
    } catch (e: any) {
      setError(e.message);
    } finally {
      setLoading(false);
    }
  };

  const updateLoyalty = async (vassalId: number, loyalty: number) => {
    try {
      const { data } = await axios.patch(
        `${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals/${vassalId}`,
        { loyalty }
      );
      // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º state
      setVassals(prev => 
        prev.map(v => v.id === vassalId ? { ...v, loyalty } : v)
      );
      return data;
    } catch (e: any) {
      setError(e.message);
      throw e;
    }
  };

  return {
    vassals,
    loading,
    error,
    fetchVassals,
    updateLoyalty,
  };
};
```

### –°–æ–∑–¥–∞–Ω–∏–µ API Service

```typescript
// services/vassalsApi.ts
import axios from 'axios';
import { CONFIG } from '../../../config';

export interface Vassal {
  id: number;
  name: string;
  loyalty: number;
  player_id: number;
  country_id: number;
}

export const vassalsApi = {
  async getVassals(): Promise<Vassal[]> {
    const response = await axios.get(`${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals`);
    return response.data;
  },

  async getVassal(id: number): Promise<Vassal> {
    const response = await axios.get(`${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals/${id}`);
    return response.data;
  },

  async updateVassalLoyalty(vassalId: number, loyalty: number): Promise<Vassal> {
    const response = await axios.patch(
      `${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals/${vassalId}`,
      { loyalty }
    );
    return response.data;
  },

  async assignLand(vassalId: number, regionId: number) {
    const response = await axios.patch(
      `${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals/${vassalId}/assign_land`,
      { region_id: regionId }
    );
    return response.data;
  },

  async collectTribute(vassalId: number) {
    const response = await axios.post(
      `${CONFIG.BACKEND_URL}/api/vassals_and_robbers/vassals/${vassalId}/collect_tribute`
    );
    return response.data;
  },
};
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –ê–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞
ACTIVE_GAME=vassals-and-robbers

# Backend URL
BACKEND_URL=http://192.168.1.100:3000
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** React Native —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## TypeScript Paths

–í `tsconfig.json` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–ª–∏–∞—Å—ã:

```typescript
import { componentRegistry } from '@registry';
import { gameConfig } from '@config/game';
import { useVassals } from '@game-plugins/vassals-and-robbers/hooks/useVassals';
```

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –° –±–∞–∑–æ–≤–æ–π –∏–≥—Ä–æ–π
ACTIVE_GAME=base-game npm run android

# –° –ø–ª–∞–≥–∏–Ω–æ–º Vassals and Robbers
ACTIVE_GAME=vassals-and-robbers npm run android
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

–í `App.tsx` –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø —ç–∫—Ä–∞–Ω–∞:

```typescript
type ScreenType = 'login' | 'dashboard' | 'settings' | 'plantWorkshop' | 'processing' | 'vassals';

// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —ç–∫—Ä–∞–Ω
import VassalsScreen from './src/plugins/game-plugins/vassals-and-robbers/screens/VassalsScreen';
componentRegistry.register('VassalsScreen', VassalsScreen, false);

// –î–æ–±–∞–≤–ª—è–µ–º –≤ renderScreen
case 'vassals': {
  const VassalsScreenComponent = componentRegistry.get('VassalsScreen');
  return VassalsScreenComponent ? 
    <VassalsScreenComponent onClose={() => setCurrentScreen('settings')} /> 
    : null;
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞** - –∫–∞–∂–¥–∞—è –∏–≥—Ä–∞ –≤ —Å–≤–æ–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏  
‚úÖ **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤** - —á–µ—Ä–µ–∑ Component Registry –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞  
‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ  
‚úÖ **–£—Å–ª–æ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** - —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
‚úÖ **TypeScript –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è  
‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏** - —Å–µ—Ä–≤–∏—Å—ã, hooks –æ—Ç–¥–µ–ª—å–Ω–æ  

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (–ë–ï–ó EXAMPLE):**
- `src/registry/ComponentRegistry.ts`
- `src/registry/index.ts`
- `src/config/game.ts`
- `src/plugins/index.ts`
- `App.tsx` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- `tsconfig.json` (–æ–±–Ω–æ–≤–ª—ë–Ω)

**–§–∞–π–ª—ã –ø–ª–∞–≥–∏–Ω–æ–≤ (–° EXAMPLE):**
- `src/plugins/game-plugins/vassals-and-robbers/index.ts`
- `src/plugins/game-plugins/vassals-and-robbers/README.md`
- `src/plugins/game-plugins/README.md`

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PlantWorkshopScreen

```typescript
// src/plugins/game-plugins/vassals-and-robbers/screens/CustomPlantWorkshopScreen.tsx
import React from 'react';
import { View, Text, StyleSheet } from 'react-native';

interface PlantWorkshopScreenProps {
  onClose: () => void;
}

const CustomPlantWorkshopScreen: React.FC<PlantWorkshopScreenProps> = ({ onClose }) => {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>üéÆ Vassals Game - Plant Workshop</Text>
      <Text>–≠—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã!</Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#e8f5e9' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20 },
});

export default CustomPlantWorkshopScreen;
```

–í `index.ts` –ø–ª–∞–≥–∏–Ω–∞:

```typescript
import { componentRegistry } from '../../../registry';
import CustomPlantWorkshopScreen from './screens/CustomPlantWorkshopScreen';

export const initVassalsAndRobbersPlugin = () => {
  componentRegistry.register('PlantWorkshopScreen', CustomPlantWorkshopScreen);
};
```

### –ü—Ä–∏–º–µ—Ä 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ Vassals

```typescript
// src/plugins/game-plugins/vassals-and-robbers/screens/VassalsScreen.tsx
import React, { useEffect } from 'react';
import { View, Text, FlatList, StyleSheet, ActivityIndicator } from 'react-native';
import { useVassals } from '../hooks/useVassals';

interface VassalsScreenProps {
  onClose: () => void;
}

export const VassalsScreen: React.FC<VassalsScreenProps> = ({ onClose }) => {
  const { vassals, loading, fetchVassals } = useVassals();

  useEffect(() => {
    fetchVassals();
  }, []);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>–í–∞—Å—Å–∞–ª—ã</Text>
      
      {loading ? (
        <ActivityIndicator size="large" color="#1976d2" />
      ) : (
        <FlatList
          data={vassals}
          renderItem={({ item }) => (
            <View style={styles.vassalItem}>
              <Text style={styles.vassalName}>{item.name}</Text>
              <Text style={styles.vassalLoyalty}>–õ–æ—è–ª—å–Ω–æ—Å—Ç—å: {item.loyalty}</Text>
            </View>
          )}
          keyExtractor={item => item.id.toString()}
        />
      )}
    </View>
  );
};

const styles = StyleSheet.create({
  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },
  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20 },
  vassalItem: { 
    padding: 15, 
    backgroundColor: 'white', 
    marginBottom: 10, 
    borderRadius: 8,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  vassalName: { fontSize: 18, fontWeight: '600', color: '#333' },
  vassalLoyalty: { fontSize: 14, color: '#666', marginTop: 5 },
});
```

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ –ø–ª–∞–≥–∏–Ω–µ:

```typescript
import VassalsScreen from './screens/VassalsScreen';

export const initVassalsAndRobbersPlugin = () => {
  componentRegistry.register('VassalsScreen', VassalsScreen);
};
```

–í App.tsx:

```typescript
case 'vassals': {
  const VassalsScreenComponent = componentRegistry.get('VassalsScreen');
  return VassalsScreenComponent ? 
    <VassalsScreenComponent onClose={() => setCurrentScreen('settings')} /> 
    : null;
}
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```typescript
import { componentRegistry } from './src/registry';

// –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
console.log('Registered:', componentRegistry.list());

// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
console.log('Overridden:', componentRegistry.listOverridden());
```

### –õ–æ–≥–∏ –ø–ª–∞–≥–∏–Ω–æ–≤

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –ª–æ–≥–∏:

```
[Plugins] Initializing plugins for: vassals-and-robbers
[Vassals and Robbers] Initializing plugin...
[Registry] Registering component: PlantWorkshopScreen
[Vassals and Robbers] Plugin initialized
[Plugins] All plugins initialized
[Plugins] Overridden components: PlantWorkshopScreen
```

## –°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Android

```bash
# Debug build —Å –±–∞–∑–æ–≤–æ–π –∏–≥—Ä–æ–π
ACTIVE_GAME=base-game npm run android

# Debug build —Å Vassals and Robbers
ACTIVE_GAME=vassals-and-robbers npm run android

# Release build
cd android
ACTIVE_GAME=vassals-and-robbers ./gradlew assembleRelease
```

### iOS

```bash
# Debug build
ACTIVE_GAME=vassals-and-robbers npm run ios

# Release build
cd ios
ACTIVE_GAME=vassals-and-robbers pod install
xcodebuild -workspace era_native.xcworkspace -scheme era_native -configuration Release
```

## Troubleshooting

### –ü–ª–∞–≥–∏–Ω –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–≥–∏–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ `src/plugins/index.ts`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å–ª–æ–≤–∏–µ `gameConfig.isActive()` –≤ –ø–ª–∞–≥–∏–Ω–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–≥–∏–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–ª–∞–≥–∏–Ω—ã –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —è–¥—Ä–∞)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### TypeScript –æ—à–∏–±–∫–∏ —Å paths

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `tsconfig.json` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ TypeScript —Å–µ—Ä–≤–µ—Ä –≤ IDE.

## –†–µ—Å—É—Ä—Å—ã

- –°–º. –≥–æ—Ç–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω-—à–∞–±–ª–æ–Ω –≤ `src/plugins/game-plugins/vassals-and-robbers/`
- Component Registry API: `src/registry/ComponentRegistry.ts`
- Game Config API: `src/config/game.ts`

